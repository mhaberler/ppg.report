import{c as P,t as g,bY as N,g as _,e as B,b as T,d as A,f as S,i as W,n as u,r as w,k as s,l as a,F as M,u as m,bZ as X,E as Y,bD as U,aa as F,b_ as Z,B as b,I as k,b$ as q}from"./index-8xwTXWjW.js";import{c as j,l as D,a as z,e as R,b as G,A as $,B as H,u as J,G as V,M as K,C as Q,d as ee}from"./MyPosition-KD1aA7ac.js";import{c as L,u as te,T as ne,s as re,o as oe,a as ae,g as ie}from"./Report-DF4TB68l.js";function se(n){return P(n,Date.now())}function ce(n,t){const e=g(n),o=g(t),r=e.getFullYear()-o.getFullYear(),c=e.getMonth()-o.getMonth();return r*12+c}function le(n){const t=g(n);return t.setHours(23,59,59,999),t}function de(n){const t=g(n),e=t.getMonth();return t.setFullYear(t.getFullYear(),e+1,0),t.setHours(23,59,59,999),t}function fe(n){const t=g(n);return+le(t)==+de(t)}function ue(n,t){const e=g(n),o=g(t),r=L(e,o),c=Math.abs(ce(e,o));let l;if(c<1)l=0;else{e.getMonth()===1&&e.getDate()>27&&e.setDate(30),e.setMonth(e.getMonth()-r*c);let i=L(e,o)===-r;fe(g(n))&&c===1&&L(n,o)===1&&(i=!1),l=r*(c-Number(i))}return l===0?0:l}function he(n,t,e){const o=N(n,t)/1e3;return _(e==null?void 0:e.roundingMethod)(o)}function me(n,t,e){const o=W(),r=(e==null?void 0:e.locale)??o.locale??B,c=2520,l=L(n,t);if(isNaN(l))throw new RangeError("Invalid time value");const i=Object.assign({},e,{addSuffix:e==null?void 0:e.addSuffix,comparison:l});let p,h;l>0?(p=g(t),h=g(n)):(p=g(n),h=g(t));const y=he(h,p),I=(T(h)-T(p))/1e3,d=Math.round((y-I)/60);let f;if(d<2)return e!=null&&e.includeSeconds?y<5?r.formatDistance("lessThanXSeconds",5,i):y<10?r.formatDistance("lessThanXSeconds",10,i):y<20?r.formatDistance("lessThanXSeconds",20,i):y<40?r.formatDistance("halfAMinute",0,i):y<60?r.formatDistance("lessThanXMinutes",1,i):r.formatDistance("xMinutes",1,i):d===0?r.formatDistance("lessThanXMinutes",1,i):r.formatDistance("xMinutes",d,i);if(d<45)return r.formatDistance("xMinutes",d,i);if(d<90)return r.formatDistance("aboutXHours",1,i);if(d<A){const v=Math.round(d/60);return r.formatDistance("aboutXHours",v,i)}else{if(d<c)return r.formatDistance("xDays",1,i);if(d<S){const v=Math.round(d/A);return r.formatDistance("xDays",v,i)}else if(d<S*2)return f=Math.round(d/S),r.formatDistance("aboutXMonths",f,i)}if(f=ue(h,p),f<12){const v=Math.round(d/S);return r.formatDistance("xMonths",v,i)}else{const v=f%12,O=Math.trunc(f/12);return v<3?r.formatDistance("aboutXYears",O,i):v<9?r.formatDistance("overXYears",O,i):r.formatDistance("almostXYears",O+1,i)}}function ge(n,t){return me(n,se(n),t)}const pe=j(function({children:t,...e},o){const r=new D.FeatureGroup([],e);return z(r,R(o,{layerContainer:r,overlayContainer:r}))}),be=G(function({position:t,...e},o){const r=new D.Marker(t,e);return z(r,R(o,{overlayContainer:r}))},function(t,e,o){e.position!==o.position&&t.setLatLng(e.position),e.icon!=null&&e.icon!==o.icon&&t.setIcon(e.icon),e.zIndexOffset!=null&&e.zIndexOffset!==o.zIndexOffset&&t.setZIndexOffset(e.zIndexOffset),e.opacity!=null&&e.opacity!==o.opacity&&t.setOpacity(e.opacity),t.dragging!=null&&e.draggable!==o.draggable&&(e.draggable===!0?t.dragging.enable():t.dragging.disable())}),we=j(function({bounds:t,...e},o){const r=new D.Rectangle(t,e);return z(r,R(o,{overlayContainer:r}))},function(t,e,o){e.bounds!==o.bounds&&t.setBounds(e.bounds)}),ye=u("div",{target:"e15oygg71"})({name:"4zk4ri",styles:"display:flex;flex-direction:column;gap:1rem"}),x=u("div",{target:"e15oygg70"})({name:"i2lrof",styles:'display:flex;justify-content:space-between;position:relative;>*:first-of-type{opacity:0.7;}&:not(:last-of-type){&:after{content:"";position:absolute;left:2rem;right:2rem;bottom:calc(-0.5rem - 1px);height:0.5px;background:#333;}}'}),ve=u("div",{target:"e1tkatgy0"})({name:"dgniwu",styles:"cursor:pointer;@media (hover: hover){&:hover{text-decoration:underline;}}"});function xe({children:n}){const[t,e]=w.useState(!1),{refs:o,floatingStyles:r}=te({open:t,middleware:[re(),oe(5)]});async function c(){await navigator.clipboard.writeText(n),e(!0)}return w.useEffect(()=>{if(!t)return;const l=setTimeout(()=>{e(!1)},1500);return()=>clearTimeout(l)},[t]),s(M,{children:[a(ve,{ref:o.setReference,onClick:c,children:n}),t&&a(ne,{ref:o.setFloating,style:r,children:"Copied to clipboard"})]})}function Me(){const n=m(f=>f.user.heightUnit),t=X(n),e=m(f=>f.weather.timeZone),o=m(f=>f.weather.windsAloft),r=m(f=>f.weather.weather),{location:c}=Y(),[l,i]=(c??"").split(","),p=m(f=>f.weather.elevation);if(!l||!i)throw new Error("lat or lon not defined!");if(!o||typeof o!="object")throw new Error("RAP not defined");if(!e)throw new Error("timeZone not defined");const h=o.hours[0].altitudes[0].altitudeInM,y=typeof o=="object"&&o.source==="rucSounding",I=(()=>{switch(o.source){case"openMeteo":return s(M,{children:[a("a",{href:"https://open-meteo.com",target:"_blank",rel:"noopener noreferrer",children:"open-meteo.com"})," ","/ Best model"]});case"rucSounding":return s(M,{children:[a("a",{href:"https://rucsoundings.noaa.gov",target:"_blank",rel:"noopener noreferrer",children:"rucsoundings.noaa.gov"})," ","/ Op40"]})}})(),d=(()=>{if(!(!r||typeof r!="object"))return"byUnixTimestamp"in r?a("a",{href:"https://open-meteo.com",target:"_blank",rel:"noopener noreferrer",children:"open-meteo.com / Best model"}):a("a",{href:"https://www.weather.gov/documentation/services-web-api",target:"_blank",rel:"noopener noreferrer",children:"api.weather.gov"})})();return s(M,{children:[U()&&s(x,{children:[a("div",{children:"Coordinates"}),a("div",{children:a(xe,{children:`${l},${i}`})})]}),s(x,{children:[a("div",{children:"Location elevation"}),s("div",{children:[Math.round(F(p??-1,n)).toLocaleString(),t]})]}),y&&s(x,{children:[a("div",{children:"Winds aloft gridpoint elevation"}),s("div",{children:[Math.round(F(h,n)).toLocaleString(),t]})]}),s(x,{children:[a("div",{children:"Winds aloft"}),a("div",{children:I})]}),s(x,{children:[a("div",{children:"Hourly weather"}),a("div",{children:d})]}),s(x,{children:[a("div",{children:"Time zone"}),s("div",{children:[e," (",Z(e),")"]})]})]})}const De=n=>w.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 -0.03 45.7 45.73",...n},w.createElement("path",{fill:"currentColor",d:"m36.038 16.922 7.873-7.303c1.104-1.018 1.737-2.434 1.768-3.935.029-1.5-.562-2.94-1.623-4.002l-.058-.059C42.936.562 41.496-.028 39.996.001c-1.502.03-2.921.667-3.938 1.77l-7.302 7.873L4.57 1.321c-1.459-.504-2.893-.122-3.346.887L.142 4.631C-.31 5.642.363 6.967 1.71 7.719l18.991 10.612-8.547 9.216-4.842-1.046c-.527-.114-1.059.169-1.259.671l-.725 1.826c-.2.501.005 1.062.467 1.34l5.239 3.146 1.188 1.188 3.146 5.24c.278.461.844.659 1.346.461l1.821-.723c.503-.199.785-.729.672-1.255l-1.057-4.883 9.198-8.531L37.96 43.972c.753 1.348 2.077 2.021 3.089 1.568l2.421-1.082c1.011-.452 1.395-1.888.891-3.347l-8.323-24.189z"})),Se=u("div",{target:"e164yqft5"})({name:"5m3rb8",styles:"padding:0.5rem 1rem 0;display:flex;flex-direction:column;gap:0.25rem"}),C=u("div",{target:"e164yqft4"})({name:"e53f8",styles:"display:flex;align-items:center;gap:1rem;font-size:0.8em"}),Ce=u("div",{target:"e164yqft3"})("width:1rem;height:1rem;border-radius:1rem;",b([0,255,0],"background"),";"),Le=u("div",{target:"e164yqft2"})({name:"1qut14a",styles:"width:1rem;height:1rem;border-radius:2px;background:rgba(50, 0, 255, 0.3);border:2px solid rgb(50, 0, 255)"}),Ie=u("div",{target:"e164yqft1"})("width:1rem;height:1rem;border-radius:2px;border:2px solid;background:rgba(255, 0, 0, 0.3);",b([255,0,0],"border-color"),";"),Oe=u(De,{target:"e164yqft0"})(b([255,180,0])," width:1rem;");function ke({showTaf:n,showNws:t,showOp40:e}){return s(Se,{children:[s(C,{children:[a(Ce,{}),"Selected location"]}),e&&s(C,{children:[a(Le,{}),"Op40 Winds Aloft Gridpoint (approx)"]}),t&&s(C,{children:[a(Ie,{}),"NWS Hourly Forecast Gridpoint"]}),n&&s(C,{children:[a(Oe,{}),"Terminal Aerodrome Forecast (TAF) location"]})]})}const E=u("div",{target:"ersqnf70"})("");function ze(){const n=m(t=>t.weather.windsAloftUpdated);return s(M,{children:[s(x,{children:[a(E,{children:"Data last fetched"}),a("div",{css:k({color:n&&Math.abs(q(new Date(n),new Date))>30?"red":void 0},"",""),children:n?ae(ge(new Date(n),{addSuffix:!0})):"Never"})]}),s(x,{children:[a(E,{children:"Update interval"}),a("div",{children:"Every 30 minutes"})]})]})}const Re=u("div",{target:"e2t49z10"})({name:"bjn8wh",styles:"position:relative"});function Te({speed:n=.5,children:t}){const e=w.useRef(null),o=w.useRef(null);return w.useEffect(()=>{const r=()=>{const l=e.current;if(!l)return;const i=o.current;if(!i)return;const p=i.scrollTop<0?0:i.scrollTop*n;l.style.transform=`translateY(${p}px)`},c=ie(e.current||void 0);return c&&(o.current=c,c.addEventListener("scroll",r)),()=>{o.current&&o.current.removeEventListener("scroll",r)}},[n]),a(Re,{ref:e,children:t})}const Ae=u("div",{target:"ebab3283"})({name:"d3v9zr",styles:"overflow:hidden"}),Fe=u(K,{target:"ebab3282"})("height:350px;background:black;&,.leaflet-pane *{pointer-events:none!important;}.plane-icon{background:none;",b([255,180,0]),";}.weather-geometry{",b([255,0,0],"stroke")," ",b([255,0,0],"fill")," z-index:2;position:relative;}"),Ee=u(ye,{target:"ebab3281"})({name:"1916y28",styles:"margin:2rem 1rem 1rem"}),je=u("div",{target:"ebab3280"})({name:"z22ik1",styles:"position:relative;z-index:1;background:var(--bg-bottom-sheet)"});function Xe(){const n=m(r=>r.weather.aviationWeather),t=m(r=>r.weather.windsAloft),e=m(r=>r.weather.weather),o=typeof t=="object"&&t.source==="rucSounding";return s(Ae,{children:[a(Te,{children:s(Fe,{center:[41.683,-86.25],zoomControl:!1,attributionControl:!1,scrollWheelZoom:!1,dragging:!1,doubleClickZoom:!1,trackResize:!1,boxZoom:!1,maxZoom:9.25,zoom:9,zoomSnap:void 0,children:[a($,{}),a(H,{}),a(Ne,{})]})}),s(je,{children:[a(ke,{showTaf:!!(n&&typeof n=="object"),showNws:!!(e&&typeof e=="object"&&"geometry"in e),showOp40:o}),s(Ee,{children:[a(ze,{}),a(Me,{})]})]})]})}const Pe=D.divIcon({html:'<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" viewBox="0 -0.03 45.7 45.73"><path fill="currentColor" d="m36.038 16.922 7.873-7.303c1.104-1.018 1.737-2.434 1.768-3.935.029-1.5-.562-2.94-1.623-4.002l-.058-.059C42.936.562 41.496-.028 39.996.001c-1.502.03-2.921.667-3.938 1.77l-7.302 7.873L4.57 1.321c-1.459-.504-2.893-.122-3.346.887L.142 4.631C-.31 5.642.363 6.967 1.71 7.719l18.991 10.612-8.547 9.216-4.842-1.046c-.527-.114-1.059.169-1.259.671l-.725 1.826c-.2.501.005 1.062.467 1.34l5.239 3.146 1.188 1.188 3.146 5.24c.278.461.844.659 1.346.461l1.821-.723c.503-.199.785-.729.672-1.255l-1.057-4.883 9.198-8.531L37.96 43.972c.753 1.348 2.077 2.021 3.089 1.568l2.421-1.082c1.011-.452 1.395-1.888.891-3.347l-8.323-24.189z"/></svg>',iconSize:[16,16],iconAnchor:[8,8],className:"plane-icon"}),Ne=()=>{const n=m(h=>h.weather.windsAloft),t=m(h=>h.weather.weather),e=m(h=>h.weather.aviationWeather);if(!n||typeof n!="object")throw new Error("RAP report must be defined");const o=typeof n=="object"&&n.source==="rucSounding",r=J(),c=w.useRef(),l=[n.latitude,n.longitude],i=e&&typeof e=="object"?[e.lat,e.lon]:void 0;w.useEffect(()=>{c.current&&r.fitBounds(c.current.getBounds(),{padding:[25,25]})},[r,c]);const p=D.latLng(l).toBounds(4e4);return s(pe,{ref:c,children:[o&&s(M,{children:[a(we,{bounds:p,css:k(b([0,0,255],"fill")," ",b([0,0,255],"stroke"),";","")}),a(Q,{center:l,fillOpacity:1,radius:500,css:k(b([0,0,255],"fill")," ",b([0,0,255],"stroke"),";","")})]}),i&&a(be,{position:i,icon:Pe,pane:"markerPane"}),t&&typeof t=="object"&&"geometry"in t&&t.geometry&&a(V,{data:t.geometry,pathOptions:{className:"weather-geometry"},pane:"markerPane"}),a(ee,{})]})};export{Xe as default};
//# sourceMappingURL=ReportMetadata-BYJ8W3Mo.js.map
